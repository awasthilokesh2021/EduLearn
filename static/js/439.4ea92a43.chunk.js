"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[439],{439:(e,t,a)=>{a.r(t),a.d(t,{default:()=>l});var c=a(43),r=a(213),s=a(315),n=a(3),o=a(694),d=a(579);const i=e=>{let{course:t}=e;const a=(0,s.Zp)(),{user:i}=(0,n.d4)((e=>e.auth));(0,c.useEffect)((()=>{(()=>{const e=document.createElement("script");e.src="https://checkout.razorpay.com/v1/checkout.js",e.async=!0,document.body.appendChild(e)})()}),[]);return(0,d.jsxs)(o.P.div,{className:"bg-white shadow-lg rounded-lg p-4 text-center",whileHover:{scale:1.05},whileTap:{scale:.95},initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.5},children:[(0,d.jsx)("img",{src:t.image,alt:t.title,className:"w-full h-40 object-cover rounded-md mb-4"}),(0,d.jsx)("h3",{className:"text-lg font-semibold",children:t.title}),(0,d.jsx)("p",{className:"text-sm text-gray-500",children:t.category}),(0,d.jsx)("div",{className:"mt-4",children:(0,d.jsxs)("span",{className:"text-blue-600 font-bold",children:["\u20b9",t.price]})}),(0,d.jsx)("button",{onClick:async()=>{if(!i)return alert("\u274c Please login first!"),void a("/login");try{const{data:e}=await r.A.get("https://edu-backend-2.onrender.com/api/payment/get-key"),c=e.key,s=await r.A.post("https://edu-backend-2.onrender.com/api/payment/create-order",{amount:t.price,currency:"INR",courseId:t._id,userId:i._id}),{id:n,amount:o,currency:d}=s.data,l={key:c,amount:o,currency:d,name:"EduLearn",description:t.title,order_id:n,handler:async e=>{alert("\u2705 Payment Successful!"),await r.A.post("https://edu-backend-2.onrender.com/api/payment/payment-success",{userId:i._id,courseId:t._id,amount:t.price,paymentId:e.razorpay_payment_id}),a("/thank-you")},prefill:{name:i.name,email:i.email,contact:"8442060273"},theme:{color:"#3399cc"}};new window.Razorpay(l).open()}catch(e){console.error("\u274c Payment Error:",e)}},className:"mt-3 bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600",children:"Buy Now"})]})},l=()=>{const[e,t]=(0,c.useState)([]);return(0,c.useEffect)((()=>{(async()=>{try{const e=await r.A.get("https://edu-backend-2.onrender.com/api/admin/courses");console.log("\u2705 Courses Fetched:",e.data),t(e.data)}catch(e){console.error("\u274c Error fetching courses:",e)}})()}),[]),(0,d.jsxs)("section",{className:"py-12 px-6 mt-4",children:[(0,d.jsx)("h2",{className:"text-3xl font-bold text-center mb-6",children:"Popular Courses"}),(0,d.jsx)("div",{className:"grid md:grid-cols-3 gap-6 max-w-5xl mx-auto",children:e.map((e=>(0,d.jsx)(i,{course:e},e._id)))})]})}}}]);
//# sourceMappingURL=439.4ea92a43.chunk.js.map